#!/usr/bin/env perl

use v5.28;
use utf8;

use strict;
use warnings FATAL => qw(uninitialized);

my $gg = 'git grep -rPn'; # not sure how backticks handles aliases
chomp (my @hits = `$gg $ARGV[0]`);
my $index = 1;
if(defined $ARGV[1] and $ARGV[1] eq '-n'){
    $index = $ARGV[2]
}
$index >= 0 or die;
my $ggline = $hits[$index - 1];
$ggline =~ m/^(\S+):(\d+):.*/ or die;
exec 'vim', $1,'-c', $2;
